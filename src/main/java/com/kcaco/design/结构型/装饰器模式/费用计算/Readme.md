### 

> 场景

首次免费、前一个小时免费、超出1小时，每小时2元、会员8折、封顶50元

如何计算费用？




> 思想

* 费用项：各种费用
  * 原始金额
  * 费用类型 
  * 订单信息
* 支付项（抵扣项）：优惠卷、会员等抵扣的钱
  * 钱、时间等抽象
  * 支付类型
  * 支付分组
* 计算器：通过递归计算抵扣的费用明细、实际待支付金额。组装时，串联起来，排序在前的在里面。各类型计算器需要实现获取<当前费用项,抵扣金额>、<当前费用项,抵扣明细>
    * 每个费用项对应的抵扣明细（抵扣多少钱、怎么抵扣的）
    * 每个费用项对应的实际待支付费用
    * 计算器编码
* 规则：费用计算规则
    * 数值
    * 类型
    * 顺序

> 目录
* calculate：计算器
* context：上下文
* factory：计算器工厂
* fee：费用项
* pay：抵扣项
* rule：计算规则
